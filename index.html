<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skylandle - Daily Guessing Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial Black', 'Arial Bold', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #7e22ce 100%);
            color: #ffffff;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        header {
            width: 100%;
            max-width: 800px;
            text-align: center;
            margin-bottom: 20px;
        }

        h1 {
            font-size: 48px;
            font-weight: 900;
            letter-spacing: 0.1rem;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5);
            background: linear-gradient(45deg, #ffd700, #ffed4e, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 5px;
        }

        .subtitle {
            font-size: 14px;
            color: #ffd700;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
            margin-bottom: 10px;
        }

        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            font-size: 13px;
            max-width: 800px;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }

        .legend-box {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .legend-box.correct { background: linear-gradient(135deg, #10b981, #059669); }
        .legend-box.partial { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .legend-box.incorrect { background: linear-gradient(135deg, #ef4444, #dc2626); }

        #input-container {
            position: relative;
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            max-width: 600px;
            width: 100%;
        }

        #guess-input {
            flex: 1;
            padding: 15px;
            font-size: 18px;
            border: 3px solid #ffd700;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.95);
            color: #1e3c72;
            font-weight: bold;
            text-transform: uppercase;
        }

        #submit-btn {
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #1e3c72;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.2s ease;
        }

        #guesses-container {
            width: 100%;
            max-width: 900px;
            margin-bottom: 20px;
        }

        .guess-row {
            display: grid;
            grid-template-columns: 180px repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 10px;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .guess-name {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            border: 2px solid #ffd700;
            font-size: 14px;
        }

        .attribute-cell {
            padding: 12px 8px;
            border-radius: 8px;
            font-weight: bold;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 12px;
            border: 2px solid transparent;
        }

        .attribute-cell.correct {
            background: linear-gradient(135deg, #10b981, #059669);
            border-color: #10b981;
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.5);
        }

        .attribute-cell.partial {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border-color: #f59e0b;
        }

        .attribute-cell.incorrect {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border-color: #ef4444;
        }

        .header-row {
            display: grid;
            grid-template-columns: 180px repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 10px;
            font-size: 12px;
            font-weight: bold;
            color: #ffd700;
        }

        .header-cell { text-align: center; padding: 8px; }

        #message {
            position: fixed;
            top: 120px;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #1e3c72;
            padding: 16px 24px;
            border-radius: 8px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
        }

        #message.show { opacity: 1; }

        .game-over {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(30, 60, 114, 0.98);
            padding: 40px;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            border: 3px solid #ffd700;
            z-index: 2000;
        }

        .suggestions {
            position: absolute;
            top: 60px;
            background: white;
            color: #1e3c72;
            width: calc(100% - 130px);
            max-height: 200px;
            overflow-y: auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            z-index: 1000;
        }

        .suggestion-item { padding: 12px; cursor: pointer; border-bottom: 1px solid #eee; font-weight: bold; }
        .suggestion-item:hover { background: #f0f0f0; }

        .element-chart {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 200px;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 2px solid #ffd700;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .element-chart h3 {
            color: #ffd700;
            font-size: 14px;
            margin-bottom: 10px;
            text-align: center;
        }

        .element-chart img {
            width: 100%;
            height: auto;
            border-radius: 8px;
        }

        @media (max-width: 768px) {
            .guess-row, .header-row { grid-template-columns: 100px repeat(7, 1fr); gap: 4px; }
            .attribute-cell, .guess-name { font-size: 10px; padding: 5px; }
            h1 { font-size: 32px; }
            .element-chart {
                position: static;
                width: 100%;
                max-width: 300px;
                margin: 20px auto;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>SKYLANDLE</h1>
        <div class="subtitle">Daily Mystery Skylander!</div>
    </header>

    <div class="instructions">
        Find today's mystery Skylander. New character every day at midnight!
    </div>

    <div class="legend">
        <div class="legend-item">
            <div class="legend-box correct"></div>
            <span>Correct</span>
        </div>
        <div class="legend-item">
            <div class="legend-box partial"></div>
            <span>Related Element</span>
        </div>
        <div class="legend-item">
            <div class="legend-box incorrect"></div>
            <span>Incorrect</span>
        </div>
    </div>

    <div id="game-info" style="background: rgba(255, 255, 255, 0.1); padding: 10px 20px; border-radius: 8px; margin-bottom: 20px;">
        <span>Guesses: 0/6</span>
    </div>

    <div id="input-container">
        <input type="text" id="guess-input" placeholder="Enter name..." autocomplete="off">
        <button id="submit-btn">GUESS</button>
        <div id="suggestions" class="suggestions" style="display: none;"></div>
    </div>

    <div id="message"></div>

    <div class="element-chart">
        <h3>ELEMENT CHART</h3>
        <img src="Elemental_chart.webp" alt="Skylanders Element Relationships">
    </div>

    <div id="guesses-container">
        <div class="header-row">
            <div class="header-cell">SKYLANDER</div>
            <div class="header-cell">GAME</div>
            <div class="header-cell">ELEMENT</div>
            <div class="header-cell">SPEED</div>
            <div class="header-cell">HEALTH</div>
            <div class="header-cell">ARMOR</div>
            <div class="header-cell">GENDER</div>
            <div class="header-cell">COLOR</div>
        </div>
    </div>

    <script>
        // Element relationships - each element points to two others
        const ELEMENT_RELATIONSHIPS = {
            'Undead': ['Earth', 'Life'],
            'Earth': ['Tech', 'Water'],
            'Tech': ['Magic', 'Fire'],
            'Magic': ['Undead', 'Air'],
            'Air': ['Life', 'Earth'],
            'Life': ['Water', 'Tech'],
            'Water': ['Fire', 'Magic'],
            'Fire': ['Air', 'Undead']
        };

        const SKYLANDERS_DB = {
            'SPYRO': { game: 'Spyro Adventure', element: 'Magic', speed: 50, health: 280, armor: 18, gender: 'Male', color: 'Purple' },
            'GILL GRUNT': { game: 'Spyro Adventure', element: 'Water', speed: 35, health: 270, armor: 6, gender: 'Male', color: 'Blue' },
            'TRIGGER HAPPY': { game: 'Spyro Adventure', element: 'Tech', speed: 50, health: 200, armor: 30, gender: 'Male', color: 'Yellow' },
            'ERUPTOR': { game: 'Spyro Adventure', element: 'Fire', speed: 35, health: 290, armor: 18, gender: 'Male', color: 'Red' },
            'STEALTH ELF': { game: 'Spyro Adventure', element: 'Life', speed: 50, health: 270, armor: 12, gender: 'Female', color: 'Green' },
            'TERRAFIN': { game: 'Spyro Adventure', element: 'Earth', speed: 35, health: 310, armor: 18, gender: 'Male', color: 'Brown' },
            'CHOP CHOP': { game: 'Spyro Adventure', element: 'Undead', speed: 50, health: 300, armor: 24, gender: 'Male', color: 'Blue' },
            'BASH': { game: 'Spyro Adventure', element: 'Earth', speed: 35, health: 310, armor: 12, gender: 'Male', color: 'Gray' },
            'CYNDER': { game: 'Spyro Adventure', element: 'Undead', speed: 43, health: 260, armor: 18, gender: 'Female', color: 'Purple' },
            'FLAMESLINGER': { game: 'Spyro Adventure', element: 'Fire', speed: 50, health: 250, armor: 24, gender: 'Male', color: 'Orange' },
            'ZAP': { game: 'Spyro Adventure', element: 'Water', speed: 50, health: 260, armor: 24, gender: 'Male', color: 'Blue' },
            'WRECKING BALL': { game: 'Spyro Adventure', element: 'Magic', speed: 43, health: 270, armor: 24, gender: 'Male', color: 'Blue' },
            'SONIC BOOM': { game: 'Spyro Adventure', element: 'Air', speed: 50, health: 280, armor: 18, gender: 'Female', color: 'Blue' },
            'WHIRLWIND': { game: 'Spyro Adventure', element: 'Air', speed: 50, health: 270, armor: 18, gender: 'Female', color: 'White' },
            'DRILL SERGEANT': { game: 'Spyro Adventure', element: 'Tech', speed: 43, health: 290, armor: 12, gender: 'Male', color: 'Yellow' },
            'BOOMER': { game: 'Spyro Adventure', element: 'Tech', speed: 35, health: 230, armor: 18, gender: 'Male', color: 'Yellow' },
            'WARNADO': { game: 'Spyro Adventure', element: 'Air', speed: 35, health: 310, armor: 30, gender: 'Male', color: 'Green' },
            'CAMO': { game: 'Spyro Adventure', element: 'Life', speed: 50, health: 300, armor: 24, gender: 'Male', color: 'Green' },
            'IGNITOR': { game: 'Spyro Adventure', element: 'Fire', speed: 43, health: 240, armor: 12, gender: 'Male', color: 'Orange' },
            'SUNBURN': { game: 'Spyro Adventure', element: 'Fire', speed: 43, health: 280, armor: 24, gender: 'Male', color: 'Red' },
            'DINO RANG': { game: 'Spyro Adventure', element: 'Earth', speed: 43, health: 300, armor: 30, gender: 'Male', color: 'Brown' },
            'PRISM BREAK': { game: 'Spyro Adventure', element: 'Earth', speed: 35, health: 290, armor: 18, gender: 'Male', color: 'Blue' },
            'STUMP SMASH': { game: 'Spyro Adventure', element: 'Life', speed: 43, health: 340, armor: 30, gender: 'Male', color: 'Green' },
            'LIGHTNING ROD': { game: 'Spyro Adventure', element: 'Air', speed: 43, health: 290, armor: 18, gender: 'Male', color: 'Blue' },
            'ZOOK': { game: 'Spyro Adventure', element: 'Life', speed: 43, health: 260, armor: 30, gender: 'Male', color: 'Green' },
            'GHOST ROASTER': { game: 'Spyro Adventure', element: 'Undead', speed: 43, health: 280, armor: 24, gender: 'Male', color: 'Purple' },
            'VOODOOD': { game: 'Spyro Adventure', element: 'Magic', speed: 35, health: 290, armor: 12, gender: 'Male', color: 'Blue' },
            'DOUBLE TROUBLE': { game: 'Spyro Adventure', element: 'Magic', speed: 35, health: 250, armor: 18, gender: 'Male', color: 'Yellow' },
            'HEX': { game: 'Spyro Adventure', element: 'Undead', speed: 43, health: 270, armor: 18, gender: 'Female', color: 'Purple' },
            'DROBOT': { game: 'Spyro Adventure', element: 'Tech', speed: 43, health: 290, armor: 24, gender: 'Male', color: 'Yellow' },
            'WHAM SHELL': { game: 'Spyro Adventure', element: 'Water', speed: 50, health: 300, armor: 18, gender: 'Male', color: 'Green' },
            'SLAM BAM': { game: 'Spyro Adventure', element: 'Water', speed: 35, health: 310, armor: 30, gender: 'Male', color: 'Blue' },
            'TREE REX': { game: 'Giants', element: 'Life', speed: 20, health: 430, armor: 24, gender: 'Male', color: 'Green' },
            'BOUNCER': { game: 'Giants', element: 'Tech', speed: 60, health: 430, armor: 24, gender: 'Male', color: 'Blue' },
            'CRUSHER': { game: 'Giants', element: 'Earth', speed: 20, health: 470, armor: 24, gender: 'Male', color: 'Gray' },
            'SWARM': { game: 'Giants', element: 'Air', speed: 20, health: 400, armor: 12, gender: 'Male', color: 'Orange' },
            'HOT HEAD': { game: 'Giants', element: 'Fire', speed: 20, health: 430, armor: 12, gender: 'Male', color: 'Red' },
            'EYE BRAWL': { game: 'Giants', element: 'Undead', speed: 20, health: 430, armor: 30, gender: 'Male', color: 'Purple' },
            'THUMPBACK': { game: 'Giants', element: 'Water', speed: 20, health: 460, armor: 30, gender: 'Male', color: 'Blue' },
            'NINJINI': { game: 'Giants', element: 'Magic', speed: 60, health: 410, armor: 48, gender: 'Female', color: 'Purple' },
            'JET VAC': { game: 'Giants', element: 'Air', speed: 50, health: 240, armor: 12, gender: 'Male', color: 'Blue' },
            'POP FIZZ': { game: 'Giants', element: 'Magic', speed: 43, health: 270, armor: 18, gender: 'Male', color: 'Blue' },
            'CHILL': { game: 'Giants', element: 'Water', speed: 43, health: 260, armor: 24, gender: 'Female', color: 'Blue' },
            'FRIGHT RIDER': { game: 'Giants', element: 'Undead', speed: 43, health: 270, armor: 12, gender: 'Male', color: 'Purple' },
            'SHROOMBOOM': { game: 'Giants', element: 'Life', speed: 43, health: 260, armor: 18, gender: 'Male', color: 'Green' },
            'FLASHWING': { game: 'Giants', element: 'Earth', speed: 43, health: 260, armor: 24, gender: 'Female', color: 'Blue' },
            'HOT DOG': { game: 'Giants', element: 'Fire', speed: 43, health: 250, armor: 6, gender: 'Male', color: 'Orange' },
            'SPROCKET': { game: 'Giants', element: 'Tech', speed: 43, health: 240, armor: 30, gender: 'Female', color: 'Yellow' },
        };

        const SKYLANDER_NAMES = Object.keys(SKYLANDERS_DB);
        let guesses = [];
        let gameOver = false;

        // --- DAILY SELECTION LOGIC ---
        function getDailySkylander() {
            const today = new Date();
            // Calculate days since Unix epoch using UTC for consistency across timezones
            const epochDays = Math.floor(Date.UTC(today.getUTCFullYear(), today.getUTCMonth(), today.getUTCDate()) / (1000 * 60 * 60 * 24));

            // Mulberry32 PRNG - provides good distribution across the array
            function mulberry32(seed) {
                return function() {
                    let t = seed += 0x6D2B79F5;
                    t = Math.imul(t ^ t >>> 15, t | 1);
                    t ^= t + Math.imul(t ^ t >>> 7, t | 61);
                    return ((t ^ t >>> 14) >>> 0) / 4294967296;
                }
            }

            const rng = mulberry32(epochDays);
            const index = Math.floor(rng() * SKYLANDER_NAMES.length);
            return SKYLANDER_NAMES[index];
        }

        const targetSkylander = getDailySkylander();
        const guessInput = document.getElementById('guess-input');
        const submitBtn = document.getElementById('submit-btn');
        const guessesContainer = document.getElementById('guesses-container');
        const suggestionsDiv = document.getElementById('suggestions');

        // --- LOCAL STORAGE LOGIC ---
        function saveState() {
            const state = {
                date: new Date().toDateString(),
                guesses: guesses,
                gameOver: gameOver
            };
            localStorage.setItem('skylandle_save', JSON.stringify(state));
        }

        function loadState() {
            const saved = localStorage.getItem('skylandle_save');
            if (!saved) return;
            const state = JSON.parse(saved);
            if (state.date === new Date().toDateString()) {
                state.guesses.forEach(g => {
                    guesses.push(g);
                    displayGuess(g);
                });
                gameOver = state.gameOver;
                document.getElementById('game-info').innerHTML = `<span>Guesses: ${guesses.length}/6</span>`;
                if (gameOver) {
                    const won = guesses.includes(targetSkylander);
                    showGameOver(won);
                }
            }
        }

        // Auto-complete
        guessInput.addEventListener('input', (e) => {
            const value = e.target.value.toUpperCase();
            if (value.length < 2) { suggestionsDiv.style.display = 'none'; return; }
            const matches = SKYLANDER_NAMES.filter(name => name.includes(value) && !guesses.includes(name)).slice(0, 10);
            if (matches.length > 0) {
                suggestionsDiv.innerHTML = matches.map(name => `<div class="suggestion-item" data-name="${name}">${name}</div>`).join('');
                suggestionsDiv.style.display = 'block';
            } else { suggestionsDiv.style.display = 'none'; }
        });

        suggestionsDiv.addEventListener('click', (e) => {
            if (e.target.classList.contains('suggestion-item')) {
                guessInput.value = e.target.dataset.name;
                suggestionsDiv.style.display = 'none';
                guessInput.focus();
            }
        });

        submitBtn.addEventListener('click', submitGuess);
        guessInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') submitGuess(); });

        function submitGuess() {
            if (gameOver) return;
            const guess = guessInput.value.toUpperCase().trim();
            if (!guess || !SKYLANDERS_DB[guess]) { showMessage('Check Skylander name!'); return; }
            if (guesses.includes(guess)) { showMessage('Already guessed!'); return; }

            guesses.push(guess);
            displayGuess(guess);
            guessInput.value = '';
            suggestionsDiv.style.display = 'none';
            document.getElementById('game-info').innerHTML = `<span>Guesses: ${guesses.length}/6</span>`;

            if (guess === targetSkylander) {
                gameOver = true;
                setTimeout(() => showGameOver(true), 500);
            } else if (guesses.length >= 6) {
                gameOver = true;
                setTimeout(() => showGameOver(false), 500);
            }
            saveState();
        }

        function displayGuess(guess) {
            const guessData = SKYLANDERS_DB[guess];
            const targetData = SKYLANDERS_DB[targetSkylander];
            const row = document.createElement('div');
            row.className = 'guess-row';

            const nameCell = document.createElement('div');
            nameCell.className = 'guess-name';
            nameCell.textContent = guess;
            row.appendChild(nameCell);

            const attrs = ['game', 'element', 'speed', 'health', 'armor', 'gender', 'color'];
            const numericAttrs = ['speed', 'health', 'armor'];

            attrs.forEach(attr => {
                const cell = document.createElement('div');
                const isCorrect = guessData[attr] === targetData[attr];

                // Check for partial match (element relationships)
                let isPartial = false;
                if (attr === 'element' && !isCorrect) {
                    const guessElement = guessData[attr];
                    const targetElement = targetData[attr];
                    // Check if target element points to guess (one-directional)
                    isPartial = ELEMENT_RELATIONSHIPS[targetElement]?.includes(guessElement);
                }

                const cellClass = isCorrect ? 'correct' : (isPartial ? 'partial' : 'incorrect');
                cell.className = `attribute-cell ${cellClass}`;

                let displayValue = guessData[attr];
                // Add arrows for numeric attributes
                if (!isCorrect && numericAttrs.includes(attr)) {
                    const arrow = guessData[attr] < targetData[attr] ? ' ‚Üë' : ' ‚Üì';
                    displayValue = guessData[attr] + arrow;
                }

                cell.innerHTML = `<div style="font-size:8px; opacity:0.7">${attr.toUpperCase()}</div><div>${displayValue}</div>`;
                row.appendChild(cell);
            });
            guessesContainer.appendChild(row);
        }

        function showGameOver(won) {
            const div = document.createElement('div');
            div.className = 'game-over';
            div.innerHTML = `
                <h2>${won ? 'üèÜ PORTAL MASTER' : 'üí´ TRY AGAIN'}</h2>
                <p>${won ? 'You found them!' : 'The Skylander was ' + targetSkylander}</p>
                <button onclick="copyShareText()" style="padding:10px; cursor:pointer; background:#ffd700; border:none; border-radius:5px; font-weight:bold">Share Score</button>
                <p style="font-size:12px; margin-top:15px; color:#ffd700">New Skylander in: <span id="timer"></span></p>
            `;
            document.body.appendChild(div);
            startTimer();
        }

        function startTimer() {
            setInterval(() => {
                const now = new Date();
                const tomorrow = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);
                const diff = tomorrow - now;
                const h = Math.floor(diff / 3600000);
                const m = Math.floor((diff % 3600000) / 60000);
                const s = Math.floor((diff % 60000) / 1000);
                const timerEl = document.getElementById('timer');
                if (timerEl) timerEl.textContent = `${h}h ${m}m ${s}s`;
            }, 1000);
        }

        function showMessage(text) {
            const msg = document.getElementById('message');
            msg.textContent = text;
            msg.classList.add('show');
            setTimeout(() => msg.classList.remove('show'), 2000);
        }

        function copyShareText() {
            let text = `üéÆ Skylandle Daily üéÆ\n`;
            guesses.forEach(g => {
                const gd = SKYLANDERS_DB[g];
                const td = SKYLANDERS_DB[targetSkylander];

                // Check element relationship for partial match (one-directional)
                const elementPartial = gd.element !== td.element &&
                    (ELEMENT_RELATIONSHIPS[td.element]?.includes(gd.element));

                const row = [
                    gd.game===td.game?'üü©':'üü•',
                    gd.element===td.element?'üü©':(elementPartial?'üü®':'üü•'),
                    gd.speed===td.speed?'üü©':'üü•',
                    gd.health===td.health?'üü©':'üü•',
                    gd.armor===td.armor?'üü©':'üü•',
                    gd.gender===td.gender?'üü©':'üü•',
                    gd.color===td.color?'üü©':'üü•'
                ].join('');
                text += row + '\n';
            });
            navigator.clipboard.writeText(text).then(() => showMessage('Score copied!'));
        }

        loadState();
    </script>
</body>
</html>
